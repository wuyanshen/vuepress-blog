---
sidebar: auto
---

### HashMap学习笔记

> 关键字：

哈希筒：哈希表里有很多哈希筒，用来存放数据(存放链表/红黑树)

O(1)：时间复杂度和数据的规模无关的

数据碰撞（冲突）：几个对象的哈希值相同，就叫碰撞（冲突）

hashcode：范围-2<sup>31</sup>~2<sup>31</sup>-1大概42亿个数字

红黑树：二叉平衡树



> 哈希表简介

- 核心是基于哈希值的筒和链表
- O(1)的平均查找、插入、删除时间
- 致命缺陷是哈希值的碰撞(冲突)(collision)



> Java7 HashMap

- 经典的哈希表实现：数组+链表
- 重要知识点
  - 初始容量：16
  - 默认负载容量：0.75
  - 哈希算法
  - 扩容
    - 抵消
    - 线程不安全
- HashMap的问题
  - 并发环境中非常容易碰到死锁
  - 潜在的安全隐患->可以通过精心构造的恶意请求引发Dos（拒绝服务攻击），拖慢tomcat服务器的性能（cpu100%）
    - CVE-2011-4858, Tomcat邮件组的讨论

> Java8 HashMap的改进

- 数组+链表/红黑树
- 扩容时插入顺序的改进
- 函数方法
  - forEach
  - compute系列
- Map的新API
  - merge
  - replace









